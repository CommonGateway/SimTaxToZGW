{
  "title": "GetAanslagenResult",
  "$id": "https://dowr.simxml.nl/mapping/simxml.get.aanslagen.result.mapping.json",
  "$schema": "https://docs.commongateway.nl/schemas/Mapping.schema.json",
  "version": "0.0.7",
  "passTrough": false,
  "mapping": {
    "@soortEntiteit": "F",
    "documentNummer": "{{ value.aanslagbiljetnummer }}",
    "dagtekening": "{{ value.dagtekening|date(\"Ymd\") }}",
    "indicatieBezwaar": "{% if value.bezwaarMogelijk == true %}J{% else %}N{% endif %}",
    "indicatieKwijtschelding": "J",
    "extraElementen.StUF:extraElement.0.@naam": "aanslagBiljetNummer",
    "extraElementen.StUF:extraElement.0.#": "{{ value.aanslagbiljetnummer }}",
    "extraElementen.StUF:extraElement.1.@naam": "aanslagBiljetVolgNummer",
    "extraElementen.StUF:extraElement.1.#": "{{ value.aanslagbiljetvolgnummer }}",
    "extraElementen.StUF:extraElement.2.@naam": "belastingJaar",
    "extraElementen.StUF:extraElement.2.#": "{{ value.belastingJaar }}",
    "extraElementen.StUF:extraElement.3.@naam": "codeBelastingSoortCombinatie",
    "extraElementen.StUF:extraElement.3.@xsi:nil": "true",
    "extraElementen.StUF:extraElement.3.@StUF:noValue": "geenWaarde",
    "extraElementen.StUF:extraElement.4.@naam": "omschrijvingBelastingSoortCombinatie",
    "extraElementen.StUF:extraElement.4.#": "{{ value.belastingsoortcombinatie }}",
    "extraElementen.StUF:extraElement.5.@naam": "totaalBedragAanslag",
    "extraElementen.StUF:extraElement.5.#": "{{ value.totaalbedragAanslag|replace({',' : '.'}) }}",
    "extraElementen.StUF:extraElement.6.@naam": "btwBedragAanslag",
    "extraElementen.StUF:extraElement.6.#": "0.00",
    "extraElementen.StUF:extraElement.7.@naam": "totaalBedragAanslagExclusiefBtw",
    "extraElementen.StUF:extraElement.7.#": "{{ value.totaalbedragAanslag|replace({',' : '.'}) }}",
    "extraElementen.StUF:extraElement.8.@naam": "vervalDatum",
    "extraElementen.StUF:extraElement.8.#": "{{ value.dagtekening|date_modify(\"+30 days\")|date(\"Ymd\") }}",
    "extraElementen.StUF:extraElement.9.@naam": "cumSuisAanduiding",
    "extraElementen.StUF:extraElement.9.@xsi:nil": "true",
    "extraElementen.StUF:extraElement.9.@StUF:noValue": "geenWaarde",
    "extraElementen.StUF:extraElement.10.@naam": "CSGroep",
    "extraElementen.StUF:extraElement.10.#": "000",
    "BLJARD.0.@soortEntiteit": "R",
    "BLJARD.0.ARD.@soortEntiteit": "F",
    "BLJARD.0.ARD.codeRedenBezwaar": "BZW01",
    "BLJARD.0.ARD.keuzeOmschrijvingRedenBezwaar": "Placeholder, to do, make showing bezwaren abstract",
    "BLJPRS.@soortEntiteit": "R",
    "BLJPRS.PRS.@soortEntiteit": "F",
    "BLJPRS.PRS.bsn-nummer": "{{ value.embedded.belastingplichtige.burgerservicenummer }}",
    "BLJASL": "{% if value.embedded.aanslagregels is defined %}{% set aanslagregels = [] %}{% set aanslagregels = aanslagregels|merge(value.embedded.aanslagregels) %}{{ map(\"https://dowr.simxml.nl/mapping/simxml.get.aanslag.aanslagregel.mapping.json\", aanslagregels, true)|json_encode }}{% else %}{% set aanslagregelsEmpty = {0:'empty'} %}{{ map(\"https://dowr.simxml.nl/mapping/simxml.get.aanslag.subobject.default.mapping.json\",aanslagregelsEmpty, true)|json_encode }}{% endif %}",
    "BLJBSK": "{% if value.embedded.beschikkingsregels is defined %}{% set beschikkingsregels = [] %}{% set beschikkingsregels = beschikkingsregels|merge(value.embedded.beschikkingsregels) %}{{ map(\"https://dowr.simxml.nl/mapping/simxml.get.aanslag.beschikkingsregel.mapping.json\", {'listInput': beschikkingsregels, 'aanslag': value}, true)|json_encode }}{% else %}{% set beschikkingsregelsEmpty = {0:'empty'} %}{{ map(\"https://dowr.simxml.nl/mapping/simxml.get.aanslag.subobject.default.mapping.json\",beschikkingsregelsEmpty, true)|json_encode }}{% endif %}"
  },
  "cast": {
    "BLJASL": ["jsonToArray"],
    "BLJBSK": ["jsonToArray"]
  }
}
